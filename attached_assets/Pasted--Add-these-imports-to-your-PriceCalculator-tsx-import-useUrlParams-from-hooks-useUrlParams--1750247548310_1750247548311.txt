// Add these imports to your PriceCalculator.tsx
import { useUrlParams } from '@/hooks/useUrlParams';
import { toast } from 'sonner'; // or your notification system

// Inside your PriceCalculator component, add this after your form setup:

const PriceCalculator = () => {
  // ... your existing state and form setup ...
  
  // Add URL parameter handling
  const { hasUrlParams, getPromoCode, getDepartureCity, getTravelMonth } = useUrlParams({
    form,
    onParamsLoaded: (params) => {
      // Handle special cases when URL params are loaded
      const promoCode = params.get('promo');
      const departureCity = params.get('departureCity');
      
      if (promoCode) {
        toast.success(`Promo code "${promoCode}" applied!`);
      }
      
      if (departureCity) {
        toast.info(`Showing prices for travel from ${departureCity}`);
      }
    }
  });

  // Add this effect to show a welcome message for URL visitors
  useEffect(() => {
    if (hasUrlParams()) {
      // Add a subtle indicator that parameters were pre-filled
      const indicator = document.createElement('div');
      indicator.className = 'fixed top-4 right-4 bg-green-100 border border-green-400 text-green-700 px-4 py-2 rounded-lg shadow-lg z-50';
      indicator.innerHTML = 'âœ… Travel details pre-filled from search';
      document.body.appendChild(indicator);
      
      // Remove after 5 seconds
      setTimeout(() => {
        if (document.body.contains(indicator)) {
          document.body.removeChild(indicator);
        }
      }, 5000);
    }
  }, [hasUrlParams]);

  // In your JSX, add an id to the treatment selection section:
  return (
    <div>
      {/* Your existing JSX... */}
      
      {/* Add id to treatment selection for smooth scrolling */}
      <div id="treatment-selection" className="your-treatment-section-classes">
        <h2>Available Treatments</h2>
        {/* Your treatment selection UI */}
      </div>
      
      {/* Show URL parameter status */}
      {hasUrlParams() && (
        <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
          <p className="text-blue-800 text-sm">
            ðŸš€ <strong>Quick Start:</strong> We've pre-filled your travel details. 
            {getDepartureCity() && ` Flying from ${getDepartureCity()}`}
            {getTravelMonth() && ` in ${getTravelMonth()}`}
            {getPromoCode() && ` with promo code ${getPromoCode()}`}
          </p>
        </div>
      )}
      
      {/* Rest of your component... */}
    </div>
  );
};