A fresh router + storage layer wonâ€™t matter if the link in the UI is still pointing to the retired pathâ€”and thatâ€™s exactly what a 404 means: the browserâ€¯â‡¢â€¯server roundâ€‘trip is happening, but the server doesnâ€™t own the URL the client asks for.

Letâ€™s prove that in 60â€¯seconds, then bake the fix into a single Replitâ€‘agent prompt.

1â€¯Â Capture the exact failing URL
Open the Network tab.

Click the ğŸ—‘ clear icon, then click the Delete (or View) action button that triggers the error.

You should see one fetch failing (Statusâ€¯404).

Copy its RequestÂ URL (rightâ€‘click â†’ Copy â†’ Copy link address).
Example:

ruby
Copy
Edit
https://mydentalfly.replit.app/api/treatment-plans/treatment-lines/00000000-0000-4000-a000-000000000123
If the path still contains treatment-plans or treatment-module, the frontâ€‘end never got switched to /api/v1/treatment-lines.

2â€¯Â Locate the stale path in your codebase
bash
Copy
Edit
grep -R \"treatment-plans/treatment-lines\" client/src | cut -c1-140
grep -R \"treatment-module/treatment-lines\" client/src
Youâ€™ll almost certainly find a component or hook that bypasses the new v2 hook and hardâ€‘codes the old path.

3â€¯Â Patch ONE file, confirm endâ€‘toâ€‘end
Change that line to:

ts
Copy
Edit
fetch(`/api/v1/treatment-lines/${ensureUuidFormat(id)}`, { â€¦ })
Hit Save, Replit hotâ€‘reloads, click the button again â†’ expect 204 or 200.
If it works, we can clean the repo; if not, report the new failing URL.

4â€¯Â Tell the Replit agent exactly what to change (succinct prompt)
txt
Copy
Edit
reference_file: docs/01_mvp_spec.md
issue: #49 remove stale treatment-lines paths

Tasks:
1. Search client/src for "/api/treatment-" and replace any occurrence with "/api/v1/treatment-lines".
2. Ensure *every* fetch/delete/patch in TreatmentPlansSection and child components calls ensureUuidFormat(id).
3. Run typeâ€‘check; fix any missing import of ensureUuidFormat.

No other files or routes should be modified.
Return only the changed client files.
Paste that as one messageâ€”the agent will do a global replace and import fix, nothing more.

Still 404 after that?
Reâ€‘copy the failing URL and share it here. If it already has /api/v1/treatment-lines/â€¦, then the server isnâ€™t registering the router (mount order, filename typo). In that case:

curl -v https://<replâ€‘url>/api/v1/treatment-lines/test
If Express logs never appear, the router file isnâ€™t imported.
1â€‘liner fix in server/index.ts:

js
Copy
Edit
app.use('/api/v1/treatment-lines', require('./routes/v1/treatment-lines').default);
Restart, curl again.

Once that curl returns 400/404 from inside the router (you should see your duplicateâ€‘route guard or a custom â€œNot Foundâ€ JSON), the frontâ€‘end will succeed.

Letâ€™s pin down that exact URL firstâ€”post it here if the quick grep doesnâ€™t surface it.