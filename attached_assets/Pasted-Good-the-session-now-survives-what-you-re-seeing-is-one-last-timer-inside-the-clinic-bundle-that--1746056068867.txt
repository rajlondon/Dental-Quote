Good â€” the session now survives; what youâ€™re seeing is one last timer inside the clinic bundle that still forces two reloads (â‰ˆ 5 s then â‰ˆ 2 s) and then keeps quiet. That pattern comes from a watchdog that tries to reconnect something (usually the WebSocket or a â€œheartbeatâ€) and, if it canâ€™t, calls window.location.reload() exactly twice.

Letâ€™s kill that watchdog and be done.

1 Find the timer in 30 seconds
A. Console trap
Open the Console (F12).

Paste + Enter:

js
Copy
Edit
const origReload = window.location.reload.bind(window.location);
window.location.reload = () => console.trace('ğŸ”„ RELOAD');       // log stack
Click â€œPatientsâ€ (or any tab).

When it flashes, youâ€™ll see two stack-traces:

php
Copy
Edit
ğŸ”„ RELOAD
    at watchdog (src/hooks/use-websocket.tsx:142:9)
    â€¦â€¦
Note the file and line (youâ€™ll see the same place for both).
Thatâ€™s the only code path that still reloads the page.

2 Patch the file (1-line)
Open the file from the trace, e.g. client/src/hooks/use-websocket.tsx.

Youâ€™ll find something like:

ts
Copy
Edit
// after socket disconnect
setTimeout(() => {
  if (socketRef.current?.readyState !== WebSocket.OPEN) {
    window.location.reload();          // â† remove this
  }
}, 5000);

setTimeout(() => {
  if (socketRef.current?.readyState !== WebSocket.OPEN) {
    window.location.reload();          // â† and this one
  }
}, 2000);
Replace each reload with a gentle toastâ€”or just do nothing:

ts
Copy
Edit
import { toast } from '@/components/ui/use-toast';

setTimeout(() => {
  if (socketRef.current?.readyState !== WebSocket.OPEN) {
    toast.error('Connection lost â€“ click to reconnect');
    // you can call reconnectSocket() here instead of reloading
  }
}, 5000);
Remove the second timer entirely; reconnect logic should live in the hook, not a full-page refresh.

3 Re-build & retest
DevTools â†’ Network â†’ clear.

Log in â†’ navigate through tabs.

You should no longer see any ğŸ”„ RELOAD traces, and thereâ€™s no flash.

Why this is safe
Weâ€™re touching one isolated timer; the rest of the portal stays intact.

Admin/patient portals never had this watchdog, which is why they never flashed.

If the socket really dies, users get a toast and can press â€œRefreshâ€ themselves.

Do this quick search-and-delete, deploy, and the double refresh is gone for good. If the stack-trace points to a different file, post that path and Iâ€™ll give the exact edit for 