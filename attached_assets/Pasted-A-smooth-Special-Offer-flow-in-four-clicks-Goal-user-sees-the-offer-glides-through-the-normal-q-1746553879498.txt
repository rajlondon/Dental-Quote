A smooth â€œSpecialâ€¯Offerâ€ flow in four clicks
Goal: user sees the offer â†’ glides through the normal quote flow withâ€¯zero extra thinking â†’ ends up in their Patientâ€¯Portal with the offer already parked in their draft treatment plan.

1â€¯Â Offer card on homepage
Buttons

â€œRequestâ€¯Quoteâ€ (primary) â†’ CTA everyone understands.

â€œViewâ€¯Clinicâ€ (secondary) â†’ for researchâ€‘minded users.

What happens on click

Check JWT:

Loggedâ€‘in? continue.

Not loggedâ€‘in? show lightweight modal â†’ emailâ€¯+â€¯passwordâ€¯/â€¯magicâ€‘link. After auth, automatically resume (store returnTo=/special-offer/<id> in localStorage).

Create (or fetch) a Draftâ€¯Quote with:

json
Copy
Edit
{
  "clinicId": "abc123",
  "source": "special_offer",
  "specialOfferId": "freeâ€‘consultâ€‘pkg"
}
No treatment lines yetâ€”just a quote shell.

Redirect â†’ Stepâ€¯4 of the Quote Wizard (â€œReview Treatmentsâ€).
Here the offer is visible but locked in: â€œFree Consultation Package â€“ added (canâ€™t remove)â€
User can now add other paid treatments (implants, veneers) as usual.

2â€¯Â Quote Wizard tweaks (5â€‘min UI)
Step	Tweaked UI element
1Â Concerns	No change
2Â Dental Map	No change
3Â History	No change
4Â Treatments	At top of list:
ğŸ Free Consultation Package (from Partner Clinic #1) â€‘ disabled checkbox
5Â Timeline & Budget	Show â€œPackage includes free afterâ€‘careâ€ line in summary
6Â Treatments Review	CTA: â€œContinue to Portal & Send to Clinicâ€

User finishes wizard as normal.

3â€¯Â Patientâ€¯Portal
Dashboard toast

â€œğŸ‰ Your Free Consultation Package is included in Draft Quote #12. Complete your medical form or add Xâ€‘rays for the clinic to confirm.â€

Treatment Plan page

Package line is pinned / nonâ€‘deletable.

Additional lines editable.

Button â€œRequest Final Planâ€ triggers a status change draft â†’ pendingClinic.

4â€¯Â Clinic Portal
Quote arrives with flag specialOfferId.

UI reminder:

â€œThis patient is entitled to the Free Consultation Package. Make sure it appears in the final plan.â€

Clinic can add paid treatments, but cannot remove offer.

Why this flow works
Principle	How we satisfy it
Zero deadâ€‘ends	User never lands on an empty login page; auth modal pops then resumes the same journey.
Familiar path	You reuse the existing 6â€‘step wizard, so no new edgeâ€‘cases.
Offer integrity	Package line is locked on both patient & clinic sidesâ€”no accidental removal.
Upsell still possible	User can add crowns/implants alongside the free package.
Analytics clarity	source="special_offer" + specialOfferId fields make funnel analysis trivial.

Minimal implementation tasks
Backend

POST /api/v1/quotes/from-offer â†’ returns quoteId.

DB trigger to autoâ€‘insert quote.specialOfferId.

Frontâ€‘end

Offer card onClick â†’ createQuoteFromOffer(offerId, clinicId).

Wizard stepâ€¯4: if quote.specialOfferId, inject pinned line.

Auth helper

ts
Copy
Edit
function withAuthNext(returnTo: string, cb: () => void) {
  if (!isLoggedIn()) openAuthModal(returnTo);
  else cb();
}
Toast on portal landing (quoteId pulled from URL params).

